# 系统界面修改与功能增强计划

根据您的需求，我将对剧本编辑器和分镜编辑界面进行以下系统性增强。

## 1. 剧本编辑器界面 (script/edit/{id}) AI 工具模块改造

**文件**: `src/views/script/ScriptEditorView.vue`

### 1.1 新增 AI 模型选择组件
*   **位置**: 在 `AI 工具` 卡片的 Header 部分或内容区域顶部。
*   **组件设计**:
    *   使用 `<el-select>` 组件，宽度 `100%` (响应式)。
    *   **选项**: `deepseek-r1`, `deepseek-v3`, `gemini-3-pro` 等。
    *   **默认值**: 默认选中第一个 (`deepseek-r1`)。
    *   **加载状态**: 添加 `loading` 属性，切换时显示加载动画。

### 1.2 状态管理与持久化
*   **LocalStorage**: 使用 `localStorage.getItem('preferred_script_model')` 初始化，`watch` 监听选择变化并保存。
*   **初始化**: 组件挂载时自动应用保存的模型。

### 1.3 错误处理
*   **模拟错误**: 在切换模型时添加简单的随机错误模拟或 try-catch 块。
*   **提示**: 使用 `ElMessage.error` 显示友好提示。

## 2. 分镜编辑界面 (shots/shot{id}) 图片生成模块增强

**文件**: `src/views/storyboard/ShotDetailView.vue`

### 2.1 文生图模型选择器
*   **位置**: 在“图片生成模块” Header 右侧，现有按钮左侧。
*   **组件**: `<el-select>`，`size="small"`，样式保持一致。
*   **选项**: `nano-banana` (默认), `stable-diffusion-xl`, `midjourney-v6`。
*   **标签**: 在选项中添加 `<el-tag>` 显示“快速”、“高质量”。
*   **Tooltip**: 使用 `<el-tooltip>` 包裹选项或 Select，悬停显示模型说明。

### 2.2 动态切换逻辑
*   **状态**: 新增 `selectedImageModel` ref。
*   **行为**: 切换模型时，不清除 `promptContent`，但可能触发参数重置（模拟）。

## 3. 分镜编辑界面 (shots/shot{id}) 视频生成模块升级

**文件**: `src/views/storyboard/ShotDetailView.vue`

### 3.1 图生视频模型选择器
*   **位置**: 在“分镜视频生成模块” Header 右侧。
*   **组件**: `<el-select>`，`size="small"`。
*   **选项**: `seedance` (默认), `sora`, `runway-gen2`。
*   **状态标识**: 选项显示“可用” (绿点) 或 “维护中” (灰点)。
*   **新模型标识**: 使用 Badge 或 Tag 标记 "NEW"。

### 3.2 智能推荐与对比
*   **推荐逻辑**: 简单模拟根据 `shotForm.movement` (运镜) 推荐模型（例如：动感强推荐 Sora）。在下拉框中高亮推荐项。
*   **对比功能**:
    *   暂时仅在 UI 上体现“对比”按钮或切换历史记录的入口（UI 占位）。
    *   实现模型选择切换时，记录历史选择。

## 4. 通用要求实现
*   **无障碍**: 为 Select 添加 `aria-label`。
*   **快捷键**: 监听键盘事件（如 `Alt+M` 聚焦模型选择）。
*   **动画**: 使用 Vue `<transition>` 或 CSS `transition` 实现平滑切换。

我将按照此计划执行代码修改。
